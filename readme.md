<div align='center'><img src="https://i.loli.net/2020/12/02/YuX598i7PlFOHRc.jpg" width = "200" height = "200" alt="图片名称" style='border-radius:10px' /></div>

### Linpx是什么

Linpx是一个小说阅读器。

Linpx旨在帮助读者快速、方便地阅读小说，有效地找到喜欢的作者和作品；帮助作者将作品带给更多读者、引流、增大关注度，并适当结合程序拓展小说表现形式。

Linpx目前完全依托于pixiv，没有自建数据库，后端仅提供基本的转发pixiv数据接口的功能。

后续可能会结合实际情况大幅改动。



### 图标和名字

<div align='center'><img src="https://i.loli.net/2020/12/02/EXiUAJK1SOQB8My.png" width = "100" height = "100" alt="图片名称" style='border-radius:10px' /></div>

<center>
    Linpx，即“Linpx Is Not PiXiv”<br/>
    亦为“LINpicio's PiXiv”<br/>
    logo作者：apoto5
</center>




### 创作原因？

我个人在用pixiv（或者其他平台）看那种文的时候，往往会有以下问题：

##### 1、手机阅读太过麻烦

以前如何在手机上看文：

> 1、（挂VPN）pixiv上找到
> 2、（用chrome插件）下载到本地
> 3、传到手机上
> 4、跨越层层目录来到接收文件夹
> 5、wps打开，之后wps有记录，可以直接在wps里点开
> 6、看的涩文多了以后查找翻阅啥的也还是不方便，跟其他的文档混在一起

太麻烦了，只是看个文而已，许多操作是可以通过程序简化的

我想要达到的效果

> 1、点开关注作者或者推荐作者
> 2、点开作品
>
> 自动记录最近阅读、收藏，下次可以快速开始阅读

##### 2、缺乏统一入口，难以找到更多潜在的优秀作者

> 不同作者往往分布在不同平台、账号、主页
>
> 我喜欢的文的类型（兽文）比较小众，相关推荐效果不太好
>
> 小众圈本身是很内聚的，大家因为相同的兴趣，彼此间认识、交流其实很简单，但是很多优秀的作者，仅仅因为我不知道他们的名字、没有接触过，就错过他的所有作品

我想要达到的效果

> 大家一起推荐出自己喜欢的小众文作者，打破信息壁垒
>
> 任何一个使用软件的用户，都能在推荐列表中找到所有优秀的作者
>
> 每个优秀的小众文作者，都能让自己的作品被更多人看到



同时，作为作者可能也有一些问题：

##### 3、没有合适的平台，缺少内容分发的渠道

pixiv本身有不低的门槛，在日本、以图为主、需要翻墙、读者难以主动接触到作者

国内主流平台审查过严，往往不可能过审

QQ群内聚性太高，没有办法带给更多陌生的读者



为了解决以上问题，以及一些其他原因，我便制作了Linpx



### 特性一览

##### 最近/收藏/关注

显示读者 最近阅读的小说/收藏的小说/关注的作者

##### 推荐作者

列出了一些优秀的推荐作者（主要是兽文作者）

给小众文爱好者提供了快速、全面、优质的阅读通道

##### 搜索

支持pixiv作者id搜索和作品id搜索

【todo：模糊搜索】

##### 沉浸式阅读

读者开始阅读小说后，状态栏和底部虚拟按钮会自动收起，并根据读者阅读时上下拉操作实时反馈

带来沉浸式的阅读体验

##### 缓存

用户使用过程中请求的作者信息、作品详情、图片会在本地缓存，下载一次后下次直接从本地读取

提高访问速度、减小后端压力

【todo：用户可以清除缓存】

##### 下载

统一了下载接口， 所有的二维码、下载链接、软件更新都是通过同一个接口进行的下载

##### 热更新

检测到服务器有新版本后客户端会弹出更新提示，点击后能直接下载更新，不需要通过QQ群或者重新网页下载

##### 【todo：阅读进度保存】

下次阅读时能接着上次退出的地方继续看

##### 【todo：快速分享】

通过分享神秘代码，复制后打开app，能够快速读取出分享的作者或者作品



### 将来可能的特性【todo】

##### 增强社区性

首页banner

自建数据库

重新排版布局

##### 支持长篇小说

适配长篇小说的阅读模式

##### 选项分支小说

定义一种创作格式，作者按照这种格式编辑内容，能够形成带有逻辑跳转、条件分支的小说

类似于简易avg



### 开发人员

| 名称                     | 工作描述         |
| ------------------------ | ---------------- |
| 林彼丢                   | 主策划，主程序   |
| 安卓                     | 主UI设计         |
| 可可虎                   | 上面两位的好朋友 |
| 鱼市街、橘猫的阅读器群员 | 测试             |



### 技术栈

| 技术类型    | 技术描述                                                     |
| ----------- | ------------------------------------------------------------ |
| 后端服务器  | Vultr（服务器提供商）、GoDaddy（域名商）、宝塔面板（linux服务器管理）、uni-cloud（文件托管） |
| 后端程序    | Python-Django（后端框架）、PyPixiv（pixiv接口第三方包）      |
| 前端框架    | uni-app（前端框架）、Vue（js框架）、HTML5+（js拓展安卓接口）、SCSS（css预处理器） |
| uni-app插件 | uview（前端UI库）、img-cache（图片缓存，魔改过）             |
| 其他        | Postman（接口测试）                                          |



### bug记录表

| bug描述（懒得记了，改完一条删一条吧）                    | 解决方法               |
| -------------------------------------------------------- | ---------------------- |
| 快速连续收藏多个未缓存内容时，会中断之前的下载、收藏过程 | 改为模态窗口           |
| 隐藏但不关掉app再进入app后必须先上后下才会隐藏虚拟按钮   | onHide的时候改标记标量 |



### Todo List

##### 功能性Todo

| 描述                                                         | 完成 |
| ------------------------------------------------------------ | ---- |
| 【不同收藏夹】新建收藏夹、将小说自由添加到收藏夹中           |      |
| 【本地添加】允许用户从本地或手动创建小说                     |      |
| 【微博、b站添加】允许用户从微博、b站添加小说，或搜索作者作品 |      |
| 关键字搜索                                                   |      |
| 小说详情页面菜单                                             |      |
| 文本easy share小说、作者                                     |      |
| 阅读进度保存，断点续读                                       |      |
| 作者详情中，小说列表下拉加载更多，而不仅是最多30条           |      |
| 阅读进度保存，断电续读                                       |      |

##### 展示性Todo

| 描述                                       | 完成 |
| ------------------------------------------ | ---- |
| 允许用户自由调整小说详情的字体、间距、边距 |      |
| 【动画】给页面组件变化加入简单动画         |      |
| 重做支持页面的UI                           |      |
| 基础教程、用户导引、制作初衷部分内容填充   |      |
| 最近和收藏为空时的提示                     |      |

##### 运营性Todo

| 描述                                                   | 完成 |
| ------------------------------------------------------ | ---- |
| 【演示视频】演示软件的使用方法                         |      |
| 【微博】发微博文字描述软件功能、下载渠道、附上演示视频 |      |



### 前端文档

##### 开源信息

开源仓库地址：https://github.com/libudu/linpx-frontend

快来点个Star吧！

##### 页面概览

这里的页面名称对应前端uni-app项目汇总pages目录下的页面

| 页面名称                      | 页面内容                                                     |
| ----------------------------- | ------------------------------------------------------------ |
| launch【启动】                | 显示logo、应用名、提示信息                                   |
| search【搜索】                | 目前的主页面，提供其他页面的卡片按钮入口和搜索框             |
| novel_detail【小说详情】      | 一篇小说的详细信息（封面、标题、作者、tags、正文）           |
| novels_fav【收藏小说】        | 用户收藏的小说                                               |
| novels_recent【最近阅读】     | 用户最近阅读的小说                                           |
| novels_local【本地小说】      | 本地添加的小说【todo】                                       |
| author_detail【作者详情】     | 一个作者的详细信息（名称、id、头像、背景图、简介、小说列表） |
| authors_follow【关注作者】    | 用户关注的作者列表                                           |
| authors_recommend【推荐作者】 | 推荐的作者列表                                               |
| support【支持】               | 支持页面【todo】                                             |
| user【用户】                  | 用户界面【todo】                                             |
| user_setting【用户设置】      | 用户设置【todo】                                             |
| download_linpx【热更新】      | 热更新时的下载页面                                           |

##### 本地缓存

| 接口名称              | 接口描述                       |
| --------------------- | ------------------------------ |
| pnXXXXX               | 小说数据                       |
| paXXXXX               | 作者数据（不包括该作者的小说） |
| favNovels             | 收藏的小说id字典               |
| favAuthors            | 关注的作者id字典               |
| recentNovels          | 最近阅读小说的id字典           |
| MaxRecentNovels       | 最大存储的最近阅读             |
| recommendPixivAuthors | 推荐的Pixiv作者id              |

##### 非后端网络接口

pixiv相关的很多信息需要科学上网，故必须通过后端接口

但是对于国内网站，以及pixiv中没有被墙的获取图片的接口，是直接通过前端网络请求访问的

| 平台     | 内容描述         | 网址                                                  | 备注                                         |
| -------- | ---------------- | ----------------------------------------------------- | -------------------------------------------- |
| pixiv    | 小说封面图片     | novelDetail中的coverUrl字段                           | 请求头Referer必须为https://pixiv.net/        |
| bilibili | 获取用户全部文章 | https://api.bilibili.com/x/space/article?mid=[用户id] | 请求头Referer必须为https://www.bilibili.com/ |
| bilibili | 获取特定文章内容 |                                                       |                                              |



### 后端文档

后端目前工作量并不大，主要只是转发pixiv的api请求

但外包含一些敏感信息，如超级管理员账号、我的pixiv账号等，所以暂不开源

##### 后端地址

http://api.linpx.linpicio.com/

##### 后端接口

| 接口名称          | 参数            | 返回                   |
| ----------------- | --------------- | ---------------------- |
| user_novels       | id：pixiv作者id | 该作者的第一页小说概览 |
| novel_detail      | id：pixiv作品id | 该作品的详细信息       |
| user_detail       | id：pixiv作者id | 该作者的基本信息       |
| recommend_authors | 无              | 当前的推荐作者信息     |
| version           | 无              | 当前最新版本号         |
| download          | 无              | 最新版的apk安装包文件  |

##### Pixiv API

当前后端使用了这些Pixiv的API

（寻找、处理这些api花了我很长时间）

| URL                                             | 参数                                    | 返回                       |
| ----------------------------------------------- | --------------------------------------- | -------------------------- |
| https://www.pixiv.net/ajax/novel/[小说id]       | 无                                      | 返回指定小说的详细信息     |
| pixivpy3  /v1/user/novels                       | user_id:用户id<br />offset:小说数量偏移 | 返回指定用户的小说概览信息 |
| https://www.pixiv.net/ajax/user/[用户id]?full=1 | 无                                      | 返回作者的详细信息         |



### 联系我们

| 项目 | 说明                         |
| ---- | ---------------------------- |
| 官群 | 橘猫的阅读器：576268549      |
| 官博 | 暂无，不想开太大，应该不会整 |
| 官网 | 暂无，估计懒得整             |



### 分享

二维码下载链接

![downloadQrcode.png](https://i.loli.net/2020/12/02/MfLzeXr5UmEPnxo.png)



### 捐赠列表

| 用户名   | 账号        | 金额 | 时间      | 形式     |
| -------- | ----------- | ---- | --------- | -------- |
| 神采飞扬 | QQ437175144 | 20   | 2020.11.8 | QQ群红包 |



### 可能出现的风险

| 描述              | 应对措施                                                     |
| ----------------- | ------------------------------------------------------------ |
| 举报              | 开源、免费、无偿、自愿捐赠，加强内容提示，本体不出现任何违反法律法规内容 |
| 作者认为侵权      | 加强作品来源提示，提前打招呼，加强运营                       |
| 服务器崩溃        | 换成Vultr服务器后一般不会，如果负载过大换更好服务器          |
| 后端pixiv账号封禁 | （目前似乎没有这种问题）<br />1、更换为pixiv小号；2、找找有没有更好的pixiv数据接口；3、引入多账号机制 |
| 累了              | 那不做了（雾                                                 |
